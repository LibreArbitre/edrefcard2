{% extends "base.html" %}

{% block title %}EDRefCard - Public Configurations{% endblock %}

{% block content %}
<div id="container">
    <div id="list">
        <h1>ðŸ“‹ Public Configurations</h1>
    </div>

    <div id="content">
        <!-- Search Form -->
        <form action="{{ url_for('list_configs') }}" id="searchForm">
            <div style="display: flex; gap: 1rem; align-items: flex-start; flex-wrap: wrap;">
                <div>
                    <label for="deviceFilter" style="display: block; margin-bottom: 0.5rem; color: var(--ed-orange);">
                        Filter by Controller
                    </label>
                    <select name="deviceFilter" id="deviceFilter" multiple size="6">
                        {% for controller in controllers %}
                        <option value="{{ controller }}" {% if controller in selected_controllers %}selected{% endif %}>
                            {{ controller }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div style="padding-top: 1.75rem;">
                    <input type="submit" value="ðŸ” Search">
                </div>
            </div>
            <p class="text-muted mt-1" style="font-size: 0.85rem;">
                Hold Ctrl/Cmd to select multiple controllers
            </p>
        </form>
    </div>

    {% if items %}
    <div id="content" style="margin-top: 1.5rem;">
        <table>
            <thead>
                <tr>
                    <th class="description">Description</th>
                    <th class="controllers">Controllers</th>
                    <th class="date">Date</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr>
                    <td class="description">
                        <a href="{{ item.url }}">{{ item.description }}</a>
                    </td>
                    <td class="controllers">
                        {{ item.controllers }}
                    </td>
                    <td class="date">
                        {{ item.date }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div id="content" style="margin-top: 1.5rem; text-align: center;">
        <p class="text-muted">No configurations found matching your criteria.</p>
    </div>
    {% endif %}
</div>
{% endblock %}